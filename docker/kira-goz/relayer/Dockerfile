FROM kiracore/goz:relayer-alpha

ENV RELAY_HOME=/root/relay
ENV RLYS_HOME=${RELAY_HOME}/relayers
ENV RELAY_SCRIPS=${RELAY_HOME}/scripts
ENV RELAY_CONFIGS=${RELAY_HOME}/configs
ENV CONTAINER_SCRIPTS=${RELAY_HOME}/container
ENV BUILD_SCRIPT=${CONTAINER_SCRIPTS}/deployment.sh
ENV START_SCRIPT=${CONTAINER_SCRIPTS}/start.sh
ENV TESTCHAIN_JSON_PATH=${RELAY_CONFIGS}/kira-alpha.json
ENV GOZCHAIN_JSON_PATH=${RELAY_CONFIGS}/kira-1.json
ENV HUBCHAIN_JSON_PATH=${RELAY_CONFIGS}/goz-hub.json
ENV BUCKET="kira-core-goz"

ADD ./container ${CONTAINER_SCRIPTS}
ADD ./scripts ${RELAY_SCRIPS}
ADD ./configs ${RELAY_CONFIGS}

RUN mkdir -p -v ${RLYS_HOME}
RUN chmod 777 -R ${RELAY_HOME}

ARG DEBIAN_FRONTEND=noninteractive
RUN LC_ALL=C DEBIAN_FRONTEND=noninteractive ${BUILD_SCRIPT}

RUN printenv 

CMD ["sh", "-c", "/bin/bash ${START_SCRIPT}"]

